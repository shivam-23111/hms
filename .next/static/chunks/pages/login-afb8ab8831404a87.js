(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{7984:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(9801)}])},8233:(e,t,r)=>{"use strict";function a(){let e=localStorage.getItem("user");if(!e)return null;try{return JSON.parse(e)}catch(e){return console.error("Failed to parse user data:",e),null}}r.d(t,{gL:()=>a}),r(4232)},9099:(e,t,r)=>{e.exports=r(8253)},9801:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(7876),n=r(4232),s=r(9099),o=r(8233);let i=()=>{let[e,t]=(0,n.useState)(!1),[r,i]=(0,n.useState)(""),[l,u]=(0,n.useState)(""),[d,c]=(0,n.useState)(""),[h,g]=(0,n.useState)(""),p=(0,s.useRouter)();(0,n.useEffect)(()=>{let e=(0,o.gL)();if(e){let t=e.role.toLowerCase();p.push("/".concat(t,"/dashboard"))}},[p]);let x=async t=>{t.preventDefault(),g("");let a=e?{name:d,email:r,password:l}:{email:r,password:l};try{let t=await fetch(e?"/api/auth/register":"/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),r=await t.json();if(!t.ok)return void g(r.message||"Authentication failed");if(r.user){localStorage.setItem("user",JSON.stringify(r.user));let e=r.user.role.toLowerCase();p.push("/".concat(e,"/dashboard"))}}catch(e){console.error(e),g("Something went wrong. Please try again.")}};return(0,a.jsxs)("div",{style:{maxWidth:400,margin:"2rem auto",padding:24,border:"1px solid #ccc",borderRadius:8},children:[(0,a.jsx)("h1",{children:e?"Register":"Login"}),(0,a.jsxs)("form",{onSubmit:x,children:[e&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Name:"}),(0,a.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Email:"}),(0,a.jsx)("input",{type:"email",value:r,onChange:e=>i(e.target.value),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Password:"}),(0,a.jsx)("input",{type:"password",value:l,onChange:e=>u(e.target.value),required:!0})]}),h&&(0,a.jsx)("p",{style:{color:"red"},children:h}),(0,a.jsx)("button",{type:"submit",children:e?"Register":"Login"})]}),(0,a.jsxs)("p",{style:{marginTop:16},children:[e?"Already have an account?":"Don't have an account?"," ",(0,a.jsx)("button",{type:"button",onClick:()=>t(!e),style:{color:"#1976d2",background:"none",border:"none",cursor:"pointer"},children:e?"Login":"Register"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(7984)),_N_E=e.O()}]);