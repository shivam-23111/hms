(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[709],{3691:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(7876),a=r(4232),s=r(9099),d=r(8233);let i=()=>{let[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(""),[l,o]=(0,a.useState)(""),[u,c]=(0,a.useState)(""),[h,p]=(0,a.useState)("");(0,s.useRouter)();let m=(0,d.gL)();(0,a.useEffect)(()=>{fetch("/api/doctors").then(e=>e.json()).then(e=>t(e.doctors||[]))},[]);let g=async e=>{if(e.preventDefault(),c(""),p(""),!r||!l)return void c("Please select doctor and date/time.");try{let e=await fetch("/api/patient/schedule",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:m.patientId,userId:Number(r),date:l})}),t=await e.json();e.ok?(p("Appointment scheduled successfully!"),i(""),o("")):c(t.message||"Failed to schedule appointment.")}catch(e){c("Server error. Please try again later.")}};return(0,n.jsxs)("div",{style:{maxWidth:500,margin:"2rem auto",background:"#fff",padding:32,borderRadius:12,boxShadow:"0 2px 8px #0001"},children:[(0,n.jsx)("h2",{style:{color:"#1976d2"},children:"Schedule an Appointment"}),(0,n.jsxs)("form",{onSubmit:g,children:[(0,n.jsxs)("div",{style:{marginBottom:16},children:[(0,n.jsx)("label",{children:"Doctor:"}),(0,n.jsxs)("select",{value:r,onChange:e=>i(e.target.value),required:!0,style:{width:"100%",padding:8},children:[(0,n.jsx)("option",{value:"",children:"Select Doctor"}),e.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,n.jsxs)("div",{style:{marginBottom:16},children:[(0,n.jsx)("label",{children:"Date & Time:"}),(0,n.jsx)("input",{type:"datetime-local",value:l,onChange:e=>o(e.target.value),required:!0,style:{width:"100%",padding:8}})]}),u&&(0,n.jsx)("div",{style:{color:"red",marginBottom:8},children:u}),h&&(0,n.jsx)("div",{style:{color:"green",marginBottom:8},children:h}),(0,n.jsx)("button",{type:"submit",style:{background:"#1976d2",color:"#fff",padding:"10px 24px",border:"none",borderRadius:6,fontWeight:600},children:"Schedule"})]})]})}},6686:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/patient/schedule",function(){return r(3691)}])},8233:(e,t,r)=>{"use strict";function n(){let e=localStorage.getItem("user");if(!e)return null;try{return JSON.parse(e)}catch(e){return console.error("Failed to parse user data:",e),null}}r.d(t,{gL:()=>n}),r(4232)},9099:(e,t,r)=>{e.exports=r(8253)}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(6686)),_N_E=e.O()}]);